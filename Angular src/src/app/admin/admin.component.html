<!-- dashboard.component.html -->

<h1>Tasks To Do</h1>

<!-- Add New Task Form -->
<div class="add-task">
  <h2>Add New Task</h2>
  <form (submit)="addTask()">
    <input type="number" placeholder="Id" name="taskid" [(ngModel)]="taskID" required>
    <input type="text" placeholder="Title" name="title" [(ngModel)]="title" required>
    <input type="text" placeholder="description" name="description" [(ngModel)]="description" required>
    <input type="date" placeholder="due Date" name="duedate" [(ngModel)]="dueDate" required>
    <!-- <input type="text" placeholder="Status" name="status"[(ngModel)]="status" required> -->
    <select name="status"  placeholder="Status"[(ngModel)]="status" required>
      <option value="">Select Status</option>
      <option value="in progress">In Progress</option>
      <option value="completed">Completed</option>
      <option value="deferred">Deferred</option>
    </select>
    <input type="number" placeholder="Priority" name="priority" [(ngModel)]="priority" required>
    
    <input type="number" placeholder="Assigned To(userId)" name="assignedto" [(ngModel)]="userID" required>
    <!-- <input type="number" placeholder="work ID" name="workid" [(ngModel)]="workID" required> -->
    <button type="submit" (click)="addTask()">Add Task</button>
  </form>
</div>

<button (click)="filter()">Filter by priority</button>
<!-- Task Table -->
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Due Date</th>
      <th>Status</th>
      <th>Priority</th>
      <th>Assigned To</th>
      <!-- <th>Work ID</th> -->
      
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let task of tasks">
      <td>{{ task.taskID }}</td>
      <td>{{ task.title }}</td>
      <td>{{ task.description }}</td>
      <td>{{ task.dueDate }}</td>
      <td>    
          <select  [(ngModel)]="task.status">
        <option value="In progress" >In Progress</option>
        <option value="Completed">Completed</option>
        <option value="Deferred">Deferred</option>
      </select>
      <button (click)="updateStatus(task.taskID,task.status)">update</button>
    </td>
      <td>{{ task.priority }}</td>
      <td>{{task.userID?.userID}}</td> 
      <td><button type="submit" (click) ="onDelete(task.taskID)">Delete</button></td>

    
      <!-- <td>{{ task.workID }}</td> -->
      <td>
        <!-- <button (click)="updateStatus(task.id)">Update Status</button> -->
      </td>
    </tr>
  </tbody>
</table>

